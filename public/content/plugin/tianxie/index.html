{extend name="content/template/tianxie/base.html"/}
{block name="head"}
{php}
$goods_list = goods_list($options);
{/php}
<style>
    .goodsItem{
        display: block;
    }
    .imgBox{
        width: 100%;
    }
    .imgBox img{
        max-height: unset;
    }
    .main .goods .goods-box{
        margin-right: 0;
    }
    .goodDesc{
        width: 100%;
        padding: 0 10px;
    }
    .main .goods .goods-price{
        display: inline-block;
        float: left;
        width: auto;
    }
    .main .goods .goods-num{
        display: inline-block;
        float: right;
        width: auto;
        margin-top: 0;
    }
    .main .goods .goods-num span{
        margin-left: 0;
        margin-top: 2px;
    }
    .cateBox{
        display: grid;
    }
    .cateBox p{
        margin-bottom: 0;
    }

    #search{
        display: none;
    }
    .main .goods .goods-name{
        min-height: 39px;
    }
    @media (min-width: 669px){
        .goods-list{
            display: grid;
            grid-template-columns: repeat(5, 19.1%);
            grid-column-gap: 12px;
            grid-row-gap: 15px;
        }
        .main .goods .goods-box{
            width: 100%;
        }
        .cateBox{
            grid-template-columns: repeat(5, 19.1%);
            grid-column-gap: 12px;
        }
    }

    @media (max-width: 992px){
        .cate-div{
            /*position: fixed;*/
            /*z-index: 9;*/
            /*top: 40px;*/
            /*width: 100%;*/
        }
        .cate-div .layui-row{
            /*margin: 0;*/
        }

        #search{
            display: flex;
        }
        .main .main-box#goods{
            /*margin-top: 0!important;*/
        }

    }

    @media (min-width: 992px){
        .cate-div{
            /*display: block!important;*/
        }
        .bt-mn-box, .bt-mn{
            /*display: none!important;*/
        }

    }

    @media (max-width: 669px){
        .cateBox{
            grid-template-columns: repeat(2, 49%);
            grid-column-gap: 8px;
        }
        .goods-list{
            display: grid;
            grid-template-columns: repeat(2, 49%);
            grid-column-gap: 8px;
            grid-row-gap: 12px;
        }
        .main .goods .goods-box{
            width: 100%;
        }

        .main .title-2{
            padding: 0 10px;
        }

        .main .goods .goods-num div{
            /*display: none;*/
        }


        .main .title, .main .cate, .main .goods{
            margin: 0 10px;
        }
        .layui-row {
            margin: 0 6px;
        }


    }


</style>
{/block}
{block name="main"}
<div class="nav-lock">
    <div class="main cate-div" id="navbarSupportedContent" style="">
        <div class="layui-row">
            <div class="layui-col-md8 layui-col-md-offset2 layui-col-sm12">
                <div class="main-box " id="category" style="margin-top: 10px;">
                    <p class="title-2" style="padding-left: 10px;"><span>选择分类</span></p>
                    <div class="cate cateBox" id="cateBox">
                        <?php $_img = 0; ?>
                        {volist name="goods_list" id="vo" key="key"}
                        <?php $_img = $_img >= 4 ? 0 : $_img; ?>
                        <div class="cate-box {:$category_id > 0 && $category_id == $vo.id ? 'cate-box-select' : ($key == 1 && $category_id == 0 ? 'cate-box-select' : '')}" data-key="{$key}">
                            <p>{$vo.name}</p>
                            <div>商品数量：{$vo.goods_num}</div>
                        </div>
                        <?php $_img++; ?>
                        {/volist}
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>


<div class="main">
    <div class="layui-row">
        <div class="layui-col-md8 layui-col-md-offset2 layui-col-sm12">
            <div class="main-box" id="goods" style="margin-top: 10px;">

                <p class="title-2" style="padding-left: 10px;"><span>选择商品</span></p>
                <div class="goods">
                    {volist name="goods_list" id="vo" key="key"}
                    <div class="goods-list goods-list-{$key}" style="{:$category_id > 0 && $category_id == $vo.id ? '' : ($key == 1 && $category_id == 0 ? '' : 'display: none;')}">
                        {volist name="$vo.goods" id="v"}
                        <a href="/goods/{$v.id}.html" data-id="{$v.id}" data-stock="{$v.stock}" class="goods-box product">
                            <div class="goodsItem">
                                <div class="imgBox">
                                    {if condition="$template.index_cover == 'normal'"}
                                    <img src="{$v.cover}" onerror="javascript:this.src='/assets/img/none.jpg';">
                                    {/if}
                                </div>
                                <div class="goodDesc">
                                    <div class="goods-name">{$v.name}</div>
                                    <div class="goods-price">
                                        ￥{$v.real_price}
                                    </div>
                                    <div class="goods-num">
                                        <span style="float: right;">销量 {:$v.sales}</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                        {/volist}
                    </div>
                    {/volist}

                </div>
            </div>
        </div>
    </div>

    <script>
        //点击分类
        $('.cate-box').click(function() {
            $('.cate-box').removeClass('cate-box-select');
            $(this).addClass("cate-box-select");
            var key = $(this).data("key");
            $(".goods-list").hide();
            $(".goods-list-" + key).show();
        })
    </script>
    {:doAction('home_page')}
</div>

{/block}
